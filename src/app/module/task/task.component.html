<app-navbar></app-navbar>
<form class="container">
  <form [formGroup]="TaskGroup" (ngSubmit)="addTask()">
    <div class="mb-3">
      <label for="taskName" class="form-label">Task Name</label>
      <input
        type="text"
        class="form-control"
        formControlName="taskName"
        id="taskName"
      />
    </div>
    <div class="mb-3">
      <label for="desc" class="form-label">Description</label>
      <input
        type="text"
        class="form-control"
        formControlName="desc"
        id="desc"
      />
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="!TaskGroup.valid">
      Submit
    </button>
  </form>
</form>

<div class="displayContainer">
  <table mat-table [dataSource]="Task" class="mat-elevation-z8">
    <!-- Id Column -->
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef>No.</th>
      <td mat-cell *matCellDef="let element">{{ element.id }}</td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="taskname">
      <th mat-header-cell *matHeaderCellDef>Task Name</th>
      <td mat-cell *matCellDef="let element">{{ element.taskName }}</td>
    </ng-container>

    <!-- Description Column -->
    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef>Description</th>
      <td mat-cell *matCellDef="let element">
        {{
          element.desc.length > 40
            ? element.desc.slice(0, 40) + "..."
            : element.desc
        }}
      </td>
    </ng-container>

    <!-- Status Column -->
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef>Status</th>
      <td mat-cell *matCellDef="let element">
        <i class="{{ icon }}" (click)="changeText()">{{ btnText }}</i>
      </td>
    </ng-container>

    <!-- Action Column -->
    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>Action</th>
      <td mat-cell *matCellDef="let element">
        <i
          class="bi bi-trash3-fill"
          style="color: rgba(255, 0, 0, 0.811); font-size: 1.1rem"
          (click)="deleteRow(element.id)"
        ></i>
        <i
          class="bi bi-eye-fill ms-1"
          style="color: rgb(72, 72, 255); font-size: 1.2rem"
          (click)="viewRow(element.id)"
        ></i>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>
